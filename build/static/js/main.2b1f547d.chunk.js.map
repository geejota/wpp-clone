{"version":3,"sources":["components/ChatListItem.jsx","components/ChatIntro.jsx","components/MessageItem.jsx","Api.jsx","firebaseConfig.js","components/ChatWindow.jsx","components/NewChat.jsx","components/Login.jsx","App.jsx","index.js"],"names":["onClick","active","data","useState","time","setTime","useEffect","lastMessageDate","d","Date","seconds","hours","getHours","minutes","getMinutes","className","src","image","alt","title","lastMessage","user","date","style","justifyContent","id","author","backgroundColor","body","firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","fbPopup","a","provider","auth","FacebookAuthProvider","signInWithPopup","result","addUser","u","collection","doc","set","name","avatar","merge","getContactList","userId","list","get","forEach","push","addNewChat","user2","add","messages","users","newChat","update","chats","FieldValue","arrayUnion","chatId","with","onChatList","setChatList","onSnapshot","exists","sort","b","undefined","onChatContent","setList","setUsers","sendMessage","chatData","type","now","i","uData","e","useRef","recognition","SpeechRecognition","window","webkitSpeechRecognition","emojiOpen","setEmojiOpen","text","setText","listening","setListening","current","scrollHeight","offsetHeight","scrollTop","Api","handleSendClick","color","ref","map","item","key","height","onEmojiClick","emojiObject","emoji","disableSearchBar","disableSkinTonePicker","width","placeholder","value","onChange","target","onKeyUp","keyCode","onstart","onend","onresult","results","transcript","start","show","chatlist","setShow","getList","handleClose","left","onReceive","handleFacebookLogin","alert","activeChat","setActiveChat","setUser","showNewChat","setShowNewChat","handleLoginData","newUser","uid","displayName","photoURL","fontSize","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b1f547d.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './ChatListItem.css';\r\n\r\nexport default ({onClick, active, data}) => {\r\n    \r\n    const [time, setTime] = useState('');\r\n\r\n    useEffect(()=> {\r\n        if(data.lastMessageDate>0) {\r\n            let d = new Date(data.lastMessageDate.seconds*1000)\r\n            let hours = d.getHours();\r\n            let minutes = d.getMinutes();\r\n            hours = hours <10 ? '0'+hours : hours;\r\n            minutes = minutes <10 ? '0'+minutes : minutes;\r\n            setTime(`${hours}:${minutes}`);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div \r\n                className={`chatListItem ${active?'active':''}`}\r\n                onClick={onClick}>\r\n\r\n                <img className=\"chatListItem--avatar\" src={data.image} alt=\"\" />\r\n                <div className=\"chatListItem--lines\">\r\n                    <div className=\"chatListItem--line\">\r\n                        <div className=\"chatListItem--name\">{data.title}</div>\r\n                        <div className=\"chatListItem--date\">{time}</div>\r\n                    </div>\r\n                    <div className=\"chatListItem--line\">\r\n                        <div className=\"chatListItem--lastMsg\">\r\n                            <p>{data.lastMessage}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n        </div>\r\n\r\n    )\r\n}","import React from 'react';\r\nimport './ChatIntro.css'\r\n\r\nexport default () => {\r\n    return (\r\n        <div className=\"chatIntro\">\r\n            <img src=\"https://web.whatsapp.com/img/intro-connection-light_c98cc75f2aa905314d74375a975d2cf2.jpg\" alt=\"\"/>\r\n            <h1>Mantenha o seu celular conectado</h1>\r\n            <h2>\r\n            O WhatsApp conecta ao seu telefone para sincronizar suas mensagens. <br/>\r\n            Para reduzir o uso de dados, conecte seu telefone a uma rede Wi-fi.</h2>\r\n        </div>\r\n    );\r\n}","import React, {useState, useEffect} from 'react';\r\nimport './MessageItem.css'\r\n\r\nexport default ({data,user}) => {\r\n\r\n    const [time, setTime] = useState('');\r\n\r\n    useEffect(()=>{\r\n        if(data.date > 0) {\r\n            let d = new Date (data.date.seconds*1000);\r\n            let hours = d.getHours();\r\n            let minutes = d.getMinutes();\r\n            hours = hours < 10 ? '0'+hours : hours;\r\n            minutes = minutes < 10 ? '0'+minutes : minutes;\r\n            setTime(`${hours}:${minutes}`);\r\n        }\r\n    }, [data]);\r\n\r\n    return (\r\n        <div \r\n            className=\"messageLine\"\r\n            style={{\r\n                justifyContent: user.id===data.author?'flex-end':'flex-start'\r\n            }}\r\n        >\r\n            <div \r\n                className=\"messageItem\"\r\n                style={{\r\n                    backgroundColor: user.id===data.author ? '#DCF8C6':'#FFF' \r\n                }}\r\n            >\r\n                <div className=\"messageText\">{data.body}</div>\r\n                <div className=\"messageDate\">{time}</div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}","import firebase from 'firebase/app';\r\nimport 'firebase/firebase-auth';\r\nimport 'firebase/firebase-firestore';\r\nimport firebaseConfig from './firebaseConfig'\r\n\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\nconst db = firebaseApp.firestore();\r\n\r\nexport default {\r\n    fbPopup:async () => {\r\n        const provider= new firebase.auth.FacebookAuthProvider();\r\n        let result = await firebaseApp.auth().signInWithPopup(provider);\r\n        return result;\r\n    },\r\n\r\n    addUser:async (u) => {\r\n        await db.collection('users').doc(u.id).set({\r\n            name: u.name,\r\n            avatar: u.avatar\r\n        }, {merge:true});\r\n    },\r\n\r\n    getContactList:async (userId) => {\r\n        let list = [];\r\n\r\n        let results = await db.collection('users').get();\r\n        results.forEach(result => {\r\n            let data = result.data();\r\n            if(result.id !== userId) {\r\n                list.push({\r\n                    id: result.id,\r\n                    name: data.name,\r\n                    avatar: data.avatar\r\n                })\r\n            }\r\n        });\r\n\r\n        return list;\r\n    },\r\n    addNewChat:async (user, user2) => {\r\n        let newChat = await db.collection('chats').add({\r\n            messages:[],\r\n            users:[user.id, user2.id]\r\n        });\r\n\r\n        db.collection('users').doc(user.id).update({\r\n            chats:firebase.firestore.FieldValue.arrayUnion({\r\n                chatId: newChat.id,\r\n                title: user2.name,\r\n                image: user2.avatar,\r\n                with: user2.id\r\n            })\r\n        });\r\n\r\n        db.collection('users').doc(user2.id).update({\r\n            chats:firebase.firestore.FieldValue.arrayUnion({\r\n                chatId: newChat.id,\r\n                title: user.name,\r\n                image: user.avatar,\r\n                with: user.id\r\n            })\r\n        });\r\n    },\r\n\r\n    onChatList:(userId, setChatList) => {\r\n        return db.collection('users').doc(userId).onSnapshot((doc)=>{\r\n            if(doc.exists) {\r\n                let data = doc.data();\r\n                if(data.chats) {\r\n                    let chats = [...data.chats];\r\n                    chats.sort((a,b)=>{\r\n                        if(a.lastMessageDate === undefined) {\r\n                            return -1;\r\n                        }\r\n                        if(b.lastMessageDate === undefined) {\r\n                            return -1;\r\n                        }\r\n                        if (a.lastMessageDate.seconds < b.lastMessageDate.seconds) {\r\n                            return 1;\r\n                        } else {\r\n                            return -1;\r\n                        }\r\n                    });\r\n                    setChatList(data.chats);\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    onChatContent:(chatId, setList, setUsers) => {\r\n        return db.collection('chats').doc(chatId).onSnapshot((doc)=>{\r\n            if(doc.exists) {\r\n                let data = doc.data();\r\n                setList(data.messages);\r\n                setUsers(data.users);\r\n            }\r\n        })\r\n    },\r\n\r\n    sendMessage:async (chatData, userId, type, body, users)=>{\r\n        let now = new Date();\r\n        db.collection('chats').doc(chatData.chatId).update({\r\n            messages: firebase.firestore.FieldValue.arrayUnion({\r\n                type,\r\n                author: userId,\r\n                body,\r\n                date: now\r\n            })\r\n        });\r\n\r\n        for (let i in users) {\r\n            let u = await db.collection('users').doc(users[i]).get();\r\n            let uData = u.data();\r\n            if(uData.chats) {\r\n                let chats = [...uData.chats]\r\n\r\n                for (let e in chats) {\r\n                    if(chats[e].chatId == chatData.chatId) {\r\n                        chats[e].lastMessage = body;\r\n                        chats[e].lastMessageDate = now;\r\n                    }\r\n                }\r\n                await db.collection('users').doc(users[i]).update({\r\n                    chats\r\n                });\r\n            }\r\n\r\n        }\r\n    }   \r\n};","export default {\r\n    apiKey: \"AIzaSyCokbypk-Q2P6KfWd7mDKRoFkNlHL6qsJk\",\r\n    authDomain: \"whatsappclone-75f8f.firebaseapp.com\",\r\n    projectId: \"whatsappclone-75f8f\",\r\n    storageBucket: \"whatsappclone-75f8f.appspot.com\",\r\n    messagingSenderId: \"780244493421\",\r\n    appId: \"1:780244493421:web:5f140d03c8fad9e8dc4b64\"\r\n  };\r\n","import React, {useState, useEffect, useRef} from 'react';\r\nimport './ChatWindow.css';\r\nimport EmojiPicker from 'emoji-picker-react';\r\n\r\nimport MessageItem from './MessageItem';\r\nimport Api from '../Api';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\n\r\nexport default ({user, data}) => {\r\n\r\n    const body = useRef();\r\n\r\n    let recognition = null;\r\n    let SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    if(SpeechRecognition !== undefined) {\r\n        recognition = new SpeechRecognition();\r\n    }\r\n\r\n    const [emojiOpen, setEmojiOpen] = useState(false);\r\n    const [text, setText] = useState('');\r\n    const [listening, setListening] = useState(false);\r\n    const [list, setList] = useState([]);\r\n    const [users, setUsers] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        if(body.current.scrollHeight > body.current.offsetHeight) {\r\n            body.current.scrollTop = body.current.scrollHeight-body.current.offsetHeight;\r\n        }        \r\n    }, [list]);\r\n\r\n    useEffect(()=>{\r\n        setList([]);\r\n        let unsub = Api.onChatContent(data.chatId, setList, setUsers);\r\n        return unsub;\r\n    },[data.chatId])\r\n\r\n    const handleEmojiClick = (e, emojiObject) => {\r\n        setText (text + emojiObject.emoji);\r\n    }\r\n    const handleCloseEmoji = () => {\r\n    setEmojiOpen(false);\r\n    }    \r\n    const handleOpenEmoji = () => {\r\n        setEmojiOpen(true);\r\n    }\r\n    const handleInputKeyUp = (e) => {\r\n        if(e.keyCode == 13) {\r\n            handleSendClick();\r\n        }\r\n    }\r\n    const handleSendClick = () => {\r\n        if(text !== ''){\r\n            Api.sendMessage(data, user.id, 'text',text, users);\r\n            setText('');\r\n            setEmojiOpen(false);\r\n        }\r\n    }\r\n\r\n    const handleMicClick = () => {\r\n        if(recognition !== null) {\r\n            recognition.onstart = () => {\r\n                setListening(true);\r\n            }\r\n            recognition.onend = () => {\r\n                setListening(false);\r\n            }\r\n            recognition.onresult = (e) => {\r\n                setText( e.results[0][0].transcript);\r\n            }\r\n\r\n            recognition.start();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"chatWindow\">\r\n            <div className=\"chatWindow--header\">\r\n                <div className=\"chatWindow--headerinfo\">\r\n                    <img className=\"chatWindow--avatar\" src={data.image} alt=\"\"/>\r\n                    <div className=\"chatWindow--name\">{data.title}</div>\r\n                </div>\r\n                <div className=\"chatWindow--headerbuttons\">\r\n                    <div className=\"chatWindow--btn\">\r\n                        <SearchIcon style={{color: '#919191'}} />\r\n                    </div>\r\n                    <div className=\"chatWindow--btn\">\r\n                        <AttachFileIcon style={{color: '#919191'}} />\r\n                    </div>\r\n                    <div className=\"chatWindow--btn\">\r\n                        <MoreVertIcon style={{color: '#919191'}} />\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <div ref={body} className=\"chatWindow--body\">\r\n                {list.map((item, key)=>(\r\n                    <MessageItem key={key} data={item} user={user}/>\r\n                ))}\r\n\r\n            </div>\r\n            <div \r\n            className=\"chatWindow--emojiarea\"\r\n            style={{height: emojiOpen ? '200px':'0px'}}>\r\n                <EmojiPicker\r\n                    onEmojiClick={handleEmojiClick}\r\n                    disableSearchBar\r\n                    disableSkinTonePicker\r\n                />\r\n\r\n            </div>\r\n            <div className=\"chatWindow--footer\">\r\n                <div className=\"chatWindow--pre\">\r\n                    <div \r\n                    className=\"chatWindow--btn\"\r\n                    onClick={handleCloseEmoji}\r\n                    style={{width: emojiOpen?40:0}}\r\n                    >\r\n                            <CloseIcon style={{color: '#919191'}} />\r\n                    </div>\r\n                    <div \r\n                    className=\"chatWindow--btn\"\r\n                    onClick={handleOpenEmoji}\r\n                    >\r\n\r\n                            <InsertEmoticonIcon style={{color: emojiOpen?'#009888':'#919191'}} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"chatWindow--inputarea\">\r\n                    <input \r\n                        className=\"chatWindow--input\" \r\n                        type=\"text\"\r\n                        placeholder=\"Digite uma mensagem\"\r\n                        value={text}\r\n                        onChange={e=>setText(e.target.value)}\r\n                        onKeyUp={handleInputKeyUp}\r\n                        />\r\n                </div>\r\n                <div className=\"chatWindow--pos\">\r\n                    {text ==='' &&\r\n                    <div\r\n                    className=\"chatWindow--btn\"\r\n                    onClick={handleMicClick}\r\n                    >\r\n                        <MicIcon style={{color: listening?'#126ECE':'#919191'}} />\r\n                    </div>\r\n                    }\r\n                    {text !== '' &&\r\n                    <div \r\n                    className=\"chatWindow--btn\"\r\n                    onClick={handleSendClick}\r\n                    >\r\n                        <SendIcon style={{color: '#919191'}} />\r\n                    </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import React, {useState, useEffect}from 'react';\r\nimport './NewChat.css'\r\nimport Api from '../Api'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nexport default ({user, chatlist, show, setShow}) => {\r\n    const [list, setList] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        const getList = async () => {\r\n            if(user !== null) {\r\n                let results = await Api.getContactList(user.id);\r\n                setList(results);\r\n            }\r\n        }\r\n        getList();\r\n    }, [user]);\r\n\r\n    const addNewChat = async(user2) => {\r\n        await Api.addNewChat(user, user2);\r\n\r\n        handleClose();\r\n    }\r\n    const handleClose = () => {\r\n        setShow(false);\r\n    }\r\n    return (\r\n        <div \r\n        className=\"newChat\"\r\n        style={{left: show?'0px':'-415px'}}\r\n        >\r\n            <div className=\"newChat--head\">\r\n                <div onClick={handleClose} className=\"newChat--backbutton\">\r\n                    <ArrowBackIcon style={{color: '#FFFFFF'}} />\r\n                </div>\r\n                <div className=\"newChat--headtitle\"> Nova conversa\r\n\r\n                </div>\r\n            </div>\r\n            <div className=\"newChat--list\">\r\n                {list.map((item, key)=>(\r\n                    <div onClick={()=>addNewChat(item)} className=\"newChat--item\" key={key}>\r\n                        <img className=\"newChat--itemavatar\" src={item.avatar} alt=\"\"/>\r\n                        <div className=\"newChat--itemname\">{item.name}</div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport Api from '../Api';\r\nimport './Login.css'\r\n\r\nexport default ({onReceive}) => {\r\n    const handleFacebookLogin = async() => {\r\n        let result = await Api.fbPopup();\r\n        if(result){\r\n            onReceive(result.user);\r\n        } else {\r\n            alert('Erro!')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\">\r\n            <button onClick={handleFacebookLogin}>Logar com Facebook</button>\r\n        </div>\r\n    )\r\n}","import React, {useState, useEffect} from 'react';\r\nimport './App.css';\r\nimport ChatListItem from './components/ChatListItem';\r\nimport ChatIntro  from './components/ChatIntro';\r\nimport ChatWindow from './components/ChatWindow';\r\nimport NewChat from './components/NewChat';\r\nimport Login from './components/Login';\r\nimport Api from './Api';\r\n\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\n\r\nexport default () => {\r\n\r\n    const [chatlist, setChatList] = useState([]);\r\n    const [activeChat, setActiveChat] = useState({});\r\n    const [user, setUser] = useState(null);\r\n    const [showNewChat, setShowNewChat] = useState(false);\r\n\r\n    useEffect(()=>{\r\n        if(user !== null) {\r\n           let unsub = Api.onChatList(user.id, setChatList);\r\n           return unsub;\r\n        }\r\n    }, [user]);\r\n\r\n    const handleNewChat = () => {\r\n        setShowNewChat(true)\r\n    }\r\n\r\n    const handleLoginData = async (u) => {\r\n        let newUser = {\r\n            id: u.uid,\r\n            name: u.displayName,\r\n            avatar: u.photoURL\r\n        };\r\n        await Api.addUser(newUser);\r\n        setUser(newUser);\r\n    }\r\n\r\n    if(user===null) {\r\n        return (\r\n            <Login onReceive={handleLoginData}/>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"app-window\">\r\n            <div className=\"sidebar\">\r\n            <NewChat \r\n                chatlist={chatlist}\r\n                user={user}\r\n                show={showNewChat}\r\n                setShow={setShowNewChat}\r\n            />\r\n                <header>\r\n                    <img className=\"header--avatar\" src={user.avatar} alt=\"\"/>\r\n                    <div className=\"header--buttons\">\r\n                        <div className=\"header--btn\">\r\n                            <DonutLargeIcon style={{color: '#919191'}}/>\r\n                        </div>\r\n                        <div onClick={handleNewChat} className=\"header--btn\">\r\n                            <ChatIcon style={{color: '#919191'}}/>\r\n                        </div>\r\n                        <div className=\"header--btn\">\r\n                            <MoreVertIcon style={{color: '#919191'}}/>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                <div className=\"search\">\r\n                    <div className=\"search--input\">\r\n                    <SearchIcon  fontSize=\"small\" style={{color: '#919191'}}/>\r\n                    <input type=\"search\" placeholder=\"Procurar ou comeÃ§ar uma nova conversa\" />\r\n                    </div> \r\n                </div>\r\n                <div className=\"chatlist\">\r\n                    {chatlist.map((item, key)=>(\r\n                        <ChatListItem \r\n                            key={key}\r\n                            data={item}\r\n                            active={activeChat.chatId === chatlist[key].chatId}\r\n                            onClick={()=>setActiveChat(chatlist[key])}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"contentarea\">\r\n                {activeChat.chatId !== undefined && \r\n                    <ChatWindow \r\n                        user={user}\r\n                        data={activeChat}\r\n                    />}\r\n                {activeChat.chatId === undefined && \r\n                <ChatIntro />}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}