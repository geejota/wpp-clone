(this.webpackJsonpwhatsappclone=this.webpackJsonpwhatsappclone||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(16),i=a.n(r),o=a(2),d=a.n(o),l=a(5),u=a(3),j=(a(39),a(40),function(e){var t=e.onClick,a=e.active,s=e.data,r=Object(n.useState)(""),i=Object(u.a)(r,2),o=i[0],d=i[1];return Object(n.useEffect)((function(){if(s.lastMessageDate>0){var e=new Date(1e3*s.lastMessageDate.seconds),t=e.getHours(),a=e.getMinutes();a=a<10?"0"+a:a,d("".concat(t=t<10?"0"+t:t,":").concat(a))}})),Object(c.jsxs)("div",{className:"chatListItem ".concat(a?"active":""),onClick:t,children:[Object(c.jsx)("img",{className:"chatListItem--avatar",src:s.image,alt:""}),Object(c.jsxs)("div",{className:"chatListItem--lines",children:[Object(c.jsxs)("div",{className:"chatListItem--line",children:[Object(c.jsx)("div",{className:"chatListItem--name",children:s.title}),Object(c.jsx)("div",{className:"chatListItem--date",children:o})]}),Object(c.jsx)("div",{className:"chatListItem--line",children:Object(c.jsx)("div",{className:"chatListItem--lastMsg",children:Object(c.jsx)("p",{children:s.lastMessage})})})]})]})}),h=(a(41),function(){return Object(c.jsxs)("div",{className:"chatIntro",children:[Object(c.jsx)("img",{src:"https://web.whatsapp.com/img/intro-connection-light_c98cc75f2aa905314d74375a975d2cf2.jpg",alt:""}),Object(c.jsx)("h1",{children:"Mantenha o seu celular conectado"}),Object(c.jsxs)("h2",{children:["O WhatsApp conecta ao seu telefone para sincronizar suas mensagens. ",Object(c.jsx)("br",{}),"Para reduzir o uso de dados, conecte seu telefone a uma rede Wi-fi."]})]})}),b=(a(42),a(21)),f=a.n(b),m=(a(43),function(e){var t=e.data,a=e.user,s=Object(n.useState)(""),r=Object(u.a)(s,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){if(t.date>0){var e=new Date(1e3*t.date.seconds),a=e.getHours(),c=e.getMinutes();c=c<10?"0"+c:c,o("".concat(a=a<10?"0"+a:a,":").concat(c))}}),[t]),Object(c.jsx)("div",{className:"messageLine",style:{justifyContent:a.id===t.author?"flex-end":"flex-start"},children:Object(c.jsxs)("div",{className:"messageItem",style:{backgroundColor:a.id===t.author?"#DCF8C6":"#FFF"},children:[Object(c.jsx)("div",{className:"messageText",children:t.body}),Object(c.jsx)("div",{className:"messageDate",children:i})]})})}),O=a(10),p=a(12),v=(a(44),a(45),p.a.initializeApp({apiKey:"AIzaSyCokbypk-Q2P6KfWd7mDKRoFkNlHL6qsJk",authDomain:"whatsappclone-75f8f.firebaseapp.com",projectId:"whatsappclone-75f8f",storageBucket:"whatsappclone-75f8f.appspot.com",messagingSenderId:"780244493421",appId:"1:780244493421:web:5f140d03c8fad9e8dc4b64"})),x=v.firestore(),w={fbPopup:function(){var e=Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p.a.auth.FacebookAuthProvider,e.next=3,v.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("users").doc(t.id).set({name:t.name,avatar:t.avatar},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContactList:function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,x.collection("users").get();case 3:return e.sent.forEach((function(e){var c=e.data();e.id!==t&&a.push({id:e.id,name:c.name,avatar:c.avatar})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNewChat:function(){var e=Object(l.a)(d.a.mark((function e(t,a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("chats").add({messages:[],users:[t.id,a.id]});case 2:c=e.sent,x.collection("users").doc(t.id).update({chats:p.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:a.name,image:a.avatar,with:a.id})}),x.collection("users").doc(a.id).update({chats:p.a.firestore.FieldValue.arrayUnion({chatId:c.id,title:t.name,image:t.avatar,with:t.id})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChatList:function(e,t){return x.collection("users").doc(e).onSnapshot((function(e){if(e.exists){var a=e.data();if(a.chats)Object(O.a)(a.chats).sort((function(e,t){return void 0===e.lastMessageDate||void 0===t.lastMessageDate?-1:e.lastMessageDate.seconds<t.lastMessageDate.seconds?1:-1})),t(a.chats)}}))},onChatContent:function(e,t,a){return x.collection("chats").doc(e).onSnapshot((function(e){if(e.exists){var c=e.data();t(c.messages),a(c.users)}}))},sendMessage:function(){var e=Object(l.a)(d.a.mark((function e(t,a,c,n,s){var r,i,o,l,u,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Date,x.collection("chats").doc(t.chatId).update({messages:p.a.firestore.FieldValue.arrayUnion({type:c,author:a,body:n,date:r})}),e.t0=d.a.keys(s);case 3:if((e.t1=e.t0()).done){e.next=16;break}return i=e.t1.value,e.next=7,x.collection("users").doc(s[i]).get();case 7:if(o=e.sent,!(l=o.data()).chats){e.next=14;break}for(j in u=Object(O.a)(l.chats))u[j].chatId==t.chatId&&(u[j].lastMessage=n,u[j].lastMessageDate=r);return e.next=14,x.collection("users").doc(s[i]).update({chats:u});case 14:e.next=3;break;case 16:case"end":return e.stop()}}),e)})));return function(t,a,c,n,s){return e.apply(this,arguments)}}()},g=a(18),N=a.n(g),y=a(24),k=a.n(y),C=a(19),I=a.n(C),S=a(26),W=a.n(S),F=a(25),L=a.n(F),M=a(28),D=a.n(M),E=a(27),P=a.n(E),H=function(e){var t=e.user,a=e.data,s=Object(n.useRef)(),r=null,i=window.SpeechRecognition||window.webkitSpeechRecognition;void 0!==i&&(r=new i);var o=Object(n.useState)(!1),d=Object(u.a)(o,2),l=d[0],j=d[1],h=Object(n.useState)(""),b=Object(u.a)(h,2),O=b[0],p=b[1],v=Object(n.useState)(!1),x=Object(u.a)(v,2),g=x[0],y=x[1],C=Object(n.useState)([]),S=Object(u.a)(C,2),F=S[0],M=S[1],E=Object(n.useState)([]),H=Object(u.a)(E,2),R=H[0],U=H[1];Object(n.useEffect)((function(){s.current.scrollHeight>s.current.offsetHeight&&(s.current.scrollTop=s.current.scrollHeight-s.current.offsetHeight)}),[F]),Object(n.useEffect)((function(){return M([]),w.onChatContent(a.chatId,M,U)}),[a.chatId]);var z=function(){""!==O&&(w.sendMessage(a,t.id,"text",O,R),p(""),j(!1))};return Object(c.jsxs)("div",{className:"chatWindow",children:[Object(c.jsxs)("div",{className:"chatWindow--header",children:[Object(c.jsxs)("div",{className:"chatWindow--headerinfo",children:[Object(c.jsx)("img",{className:"chatWindow--avatar",src:a.image,alt:""}),Object(c.jsx)("div",{className:"chatWindow--name",children:a.title})]}),Object(c.jsxs)("div",{className:"chatWindow--headerbuttons",children:[Object(c.jsx)("div",{className:"chatWindow--btn",children:Object(c.jsx)(N.a,{style:{color:"#919191"}})}),Object(c.jsx)("div",{className:"chatWindow--btn",children:Object(c.jsx)(k.a,{style:{color:"#919191"}})}),Object(c.jsx)("div",{className:"chatWindow--btn",children:Object(c.jsx)(I.a,{style:{color:"#919191"}})})]})]}),Object(c.jsx)("div",{ref:s,className:"chatWindow--body",children:F.map((function(e,a){return Object(c.jsx)(m,{data:e,user:t},a)}))}),Object(c.jsx)("div",{className:"chatWindow--emojiarea",style:{height:l?"200px":"0px"},children:Object(c.jsx)(f.a,{onEmojiClick:function(e,t){p(O+t.emoji)},disableSearchBar:!0,disableSkinTonePicker:!0})}),Object(c.jsxs)("div",{className:"chatWindow--footer",children:[Object(c.jsxs)("div",{className:"chatWindow--pre",children:[Object(c.jsx)("div",{className:"chatWindow--btn",onClick:function(){j(!1)},style:{width:l?40:0},children:Object(c.jsx)(L.a,{style:{color:"#919191"}})}),Object(c.jsx)("div",{className:"chatWindow--btn",onClick:function(){j(!0)},children:Object(c.jsx)(W.a,{style:{color:l?"#009888":"#919191"}})})]}),Object(c.jsx)("div",{className:"chatWindow--inputarea",children:Object(c.jsx)("input",{className:"chatWindow--input",type:"text",placeholder:"Digite uma mensagem",value:O,onChange:function(e){return p(e.target.value)},onKeyUp:function(e){13==e.keyCode&&z()}})}),Object(c.jsxs)("div",{className:"chatWindow--pos",children:[""===O&&Object(c.jsx)("div",{className:"chatWindow--btn",onClick:function(){null!==r&&(r.onstart=function(){y(!0)},r.onend=function(){y(!1)},r.onresult=function(e){p(e.results[0][0].transcript)},r.start())},children:Object(c.jsx)(P.a,{style:{color:g?"#126ECE":"#919191"}})}),""!==O&&Object(c.jsx)("div",{className:"chatWindow--btn",onClick:z,children:Object(c.jsx)(D.a,{style:{color:"#919191"}})})]})]})]})},R=(a(52),a(29)),U=a.n(R),z=function(e){var t=e.user,a=(e.chatlist,e.show),s=e.setShow,r=Object(n.useState)([]),i=Object(u.a)(r,2),o=i[0],j=i[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=5;break}return e.next=3,w.getContactList(t.id);case 3:a=e.sent,j(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var h=function(){var e=Object(l.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.addNewChat(t,a);case 2:b();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){s(!1)};return Object(c.jsxs)("div",{className:"newChat",style:{left:a?"0px":"-415px"},children:[Object(c.jsxs)("div",{className:"newChat--head",children:[Object(c.jsx)("div",{onClick:b,className:"newChat--backbutton",children:Object(c.jsx)(U.a,{style:{color:"#FFFFFF"}})}),Object(c.jsx)("div",{className:"newChat--headtitle",children:" Nova conversa"})]}),Object(c.jsx)("div",{className:"newChat--list",children:o.map((function(e,t){return Object(c.jsxs)("div",{onClick:function(){return h(e)},className:"newChat--item",children:[Object(c.jsx)("img",{className:"newChat--itemavatar",src:e.avatar,alt:""}),Object(c.jsx)("div",{className:"newChat--itemname",children:e.name})]},t)}))})]})},A=(a(53),function(e){var t=e.onReceive,a=function(){var e=Object(l.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.fbPopup();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"login",children:Object(c.jsx)("button",{onClick:a,children:"Logar com Facebook"})})}),K=a(30),B=a.n(K),J=a(31),T=a.n(J),V=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)({}),i=Object(u.a)(r,2),o=i[0],b=i[1],f=Object(n.useState)(null),m=Object(u.a)(f,2),O=m[0],p=m[1],v=Object(n.useState)(!1),x=Object(u.a)(v,2),g=x[0],y=x[1];Object(n.useEffect)((function(){if(null!==O)return w.onChatList(O.id,s)}),[O]);var k=function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t.uid,name:t.displayName,avatar:t.photoURL},e.next=3,w.addUser(a);case 3:p(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===O?Object(c.jsx)(A,{onReceive:k}):Object(c.jsxs)("div",{className:"app-window",children:[Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsx)(z,{chatlist:a,user:O,show:g,setShow:y}),Object(c.jsxs)("header",{children:[Object(c.jsx)("img",{className:"header--avatar",src:O.avatar,alt:""}),Object(c.jsxs)("div",{className:"header--buttons",children:[Object(c.jsx)("div",{className:"header--btn",children:Object(c.jsx)(B.a,{style:{color:"#919191"}})}),Object(c.jsx)("div",{onClick:function(){y(!0)},className:"header--btn",children:Object(c.jsx)(T.a,{style:{color:"#919191"}})}),Object(c.jsx)("div",{className:"header--btn",children:Object(c.jsx)(I.a,{style:{color:"#919191"}})})]})]}),Object(c.jsx)("div",{className:"search",children:Object(c.jsxs)("div",{className:"search--input",children:[Object(c.jsx)(N.a,{fontSize:"small",style:{color:"#919191"}}),Object(c.jsx)("input",{type:"search",placeholder:"Procurar ou come\xe7ar uma nova conversa"})]})}),Object(c.jsx)("div",{className:"chatlist",children:a.map((function(e,t){return Object(c.jsx)(j,{data:e,active:o.chatId===a[t].chatId,onClick:function(){return b(a[t])}},t)}))})]}),Object(c.jsxs)("div",{className:"contentarea",children:[void 0!==o.chatId&&Object(c.jsx)(H,{user:O,data:o}),void 0===o.chatId&&Object(c.jsx)(h,{})]})]})};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(V,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.2b1f547d.chunk.js.map